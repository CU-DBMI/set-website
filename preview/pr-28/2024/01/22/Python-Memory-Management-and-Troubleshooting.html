<!DOCTYPE html>
<html lang="en" data-dark="false">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!--
  put your analytics (e.g. Google Analytics) tracking code here
-->

  <!--
  put your search engine verification (e.g. Google Search Console) tag here
-->

  

























<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Tip of the Month: Python Memory Management and Troubleshooting | Software Engineering Team</title>

<link rel="icon" href="/set-website/preview/pr-28/images/icon.png">

<meta name="title" content="Tip of the Month: Python Memory Management and Troubleshooting">
<meta name="description" content="The software engineering team of the Department of Biomedical Informatics at the University of Colorado Anschutz">

<meta property="og:title" content="Tip of the Month: Python Memory Management and Troubleshooting">
<meta property="og:site_title" content="Software Engineering Team">
<meta property="og:description" content="The software engineering team of the Department of Biomedical Informatics at the University of Colorado Anschutz">
<meta property="og:url" content="">
<meta property="og:image" content="/set-website/preview/pr-28/images/share.jpg">
<meta property="og:locale" content="en_US">

<meta property="twitter:title" content="Tip of the Month: Python Memory Management and Troubleshooting">
<meta property="twitter:description" content="The software engineering team of the Department of Biomedical Informatics at the University of Colorado Anschutz">
<meta property="twitter:url" content="">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="/set-website/preview/pr-28/images/share.jpg">


  <meta name="author" content="dave-bunten">
  <meta property="og:type" content="article">
  <meta property="og:updated_time" content="2024-01-26T23:53:00+00:00">
  <meta property="article:published_time" content="2024-01-22T00:00:00+00:00">
  <meta property="article:modified_time" content="2024-01-26T23:53:00+00:00">
  <meta name="revised" content="2024-01-26T23:53:00+00:00">


<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "BlogPosting",
      "author": { "@type": "Person", "name": "Tip of the Month: Python Memory Management and Troubleshooting" },
      "datePublished": "2024-01-22T00:00:00+00:00",
      "dateModified": "2024-01-26T23:53:00+00:00",
    
    "name": "Tip of the Month: Python Memory Management and Troubleshooting",
    "description": "The software engineering team of the Department of Biomedical Informatics at the University of Colorado Anschutz",
    "headline": "Tip of the Month: Python Memory Management and Troubleshooting",
    "publisher": {
      "@type": "Organization",
      "logo": { "@type": "ImageObject", "url": "/set-website/preview/pr-28/images/icon.png" }
    },
    "url": ""
  }
</script>

<link rel="alternate" type="application/rss+xml" href="/set-website/preview/pr-28/feed.xml">

  <!-- Google Fonts -->
<!-- automatically get url from fonts used in theme file -->

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?display=swap&&family=Barlow:ital,wght@0,200;0,400;0,500;0,600;1,200;1,400;1,500;1,600&amp;family=Roboto+Mono:ital,wght@0,200;0,400;0,500;0,600;1,200;1,400;1,500;1,600" rel="stylesheet">

<!-- Font Awesome icons (load asynchronously due to size) -->

<link href="https://use.fontawesome.com/releases/v6.3.0/css/all.css" rel="preload" as="style" onload="this.onload = null; this.rel = 'stylesheet';">
<noscript>
  <link href="https://use.fontawesome.com/releases/v6.3.0/css/all.css" rel="stylesheet">
</noscript>

  <!-- third party styles -->
<!-- https://stylishthemes.github.io/Syntax-Themes/pygments/ -->
<link href="https://cdn.jsdelivr.net/gh/StylishThemes/Syntax-Themes/pygments/css-github/pygments-tomorrow-night-eighties.css" rel="stylesheet">

<!-- include all sass in styles folder -->


  
    <link href="/set-website/preview/pr-28/_styles/-theme.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/alert.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/all.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/anchor.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/background.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/body.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/bold.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/button.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/card.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/checkbox.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/citation.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/code.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/cols.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/dark-toggle.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/feature.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/figure.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/float.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/font.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/footer.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/form.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/grid.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/header.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/heading.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/highlight.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/icon.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/image.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/link.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/list.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/main.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/paragraph.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/portrait.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/post-excerpt.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/post-info.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/post-nav.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/quote.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/rule.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/search-box.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/search-info.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/section.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/table.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/tags.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/textbox.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/tooltip.css" rel="stylesheet">
  

  
    <link href="/set-website/preview/pr-28/_styles/util.css" rel="stylesheet">
  


<!-- include all css in styles folder -->



  <!-- third party scripts -->
<script src="https://unpkg.com/@popperjs/core@2" defer></script>
<script src="https://unpkg.com/tippy.js@6" defer></script>
<script src="https://unpkg.com/mark.js@8" defer></script>

<!-- include all js in scripts folder -->


  <script src="/set-website/preview/pr-28/_scripts/anchors.js"></script>

  <script src="/set-website/preview/pr-28/_scripts/dark-mode.js"></script>

  <script src="/set-website/preview/pr-28/_scripts/fetch-tags.js"></script>

  <script src="/set-website/preview/pr-28/_scripts/search.js"></script>

  <script src="/set-website/preview/pr-28/_scripts/site-search.js"></script>

  <script src="/set-website/preview/pr-28/_scripts/tooltip.js"></script>


</head>

  <body>
    







<header class="background" style="--image: url('/set-website/preview/pr-28/images/background.jpg')" data-dark="true">
  <a href="/set-website/preview/pr-28/" class="home">
    
      <span class="logo">
        
          <svg xmlns="http://www.w3.org/2000/svg" viewbox="-60 -50 120 100">
  <defs>
    <lineargradient id="gradient" gradientunits="userSpaceOnUse" x1="-10" y1="0" x2="10" y2="0">
      <stop stop-color="#7e57c2" offset="0%"></stop>
      <stop stop-color="#2196f3" offset="100%"></stop>
    </lineargradient>
  </defs>
  <style>
    path {
      stroke-dasharray: var(--length);
      animation: draw 1s both;
    }

    @keyframes draw {
      from {
        stroke-dashoffset: var(--length);
      }
      to {
        stroke-dashoffset: 0;
      }
    }

    .bracket {
      --length: 56.569;
    }

    .slash {
      --length: 63.246;
      animation-delay: 0.75s;
    }
  </style>
  <g fill="none" stroke="url(#gradient)" stroke-width="8" stroke-linecap="round" stroke-linejoin="round">
    <path class="bracket" d="M -30 -20 L -50 0 L -30 20"></path>
    <path class="bracket" d="M 30 20 L 50 0 L 30 -20"></path>
    <path class="slash" d="M 10 -30 L -10 30"></path>
  </g>
</svg>

        
      </span>
    
    
      <span class="title" data-tooltip="Home">
        
          <span>Software Engineering Team</span>
        
        
          <span>CU Dept. of Biomedical Informatics</span>
        
      </span>
    
  </a>

  <input class="nav-toggle" type="checkbox" aria-label="show/hide nav">

  <nav>
    
    
      
        <a href="/set-website/preview/pr-28/about/" data-tooltip="">
          About
        </a>
      
    
      
        <a href="/set-website/preview/pr-28/portfolio/" data-tooltip="">
          Portfolio
        </a>
      
    
      
        <a href="/set-website/preview/pr-28/blog/" data-tooltip="Musings and miscellany">
          Blog
        </a>
      
    
  </nav>
</header>

    <main>
      <!--
  modify main content of page:
  - add section breaks
  - attach section properties
  - wrap each table in div to allow for scrolling
  - filter out blank sections
-->








  
  
  

  <section class="background" data-size="page">
    <h1 class="center">Tip of the Month: Python Memory Management and Troubleshooting</h1>

<div class="post-info">
  
    
    
      

<div class="portrait-wrapper">
  <a href="/set-website/preview/pr-28/members/dave-bunten.html" class="portrait" data-style="tiny" aria-label="Dave Bunten (@d33bs)">
    <img src="/set-website/preview/pr-28/images/dave-bunten.jpg" class="portrait-image" alt="member portrait" loading="lazy" onerror="this.src = '/set-website/preview/pr-28/images/fallback.svg'; this.onerror = null;">

    
      <span class="portrait-text">
        
          <span class="portrait-name">
            Dave Bunten (@d33bs)
          </span>
        

        
          <span class="portrait-role">
            
            <i class="icon fa-solid fa-code"></i>
            <span>Research Data Engineer</span>
          </span>
        
      </span>
    
  </a>
</div>

    
  

  
  

  
    <span data-tooltip="Originally published on">
      <i class="icon fa-regular fa-calendar"></i>
      <span>January 22, 2024</span>
    </span>
  

  
    <span data-tooltip="Last updated on">
      <i class="icon fa-solid fa-clock-rotate-left"></i>
      <span>January 26, 2024</span>
    </span>
  
</div>


  


  <div class="tags" data-link="/set-website/preview/pr-28/blog">
    
      <a href="/set-website/preview/pr-28/blog?search=%22tag:%20tip-of-the-month%22" class="tag" data-tooltip='Show items with the tag "tip-of-the-month"'>
        tip-of-the-month
      </a>
    
      <a href="/set-website/preview/pr-28/blog?search=%22tag:%20python%22" class="tag" data-tooltip='Show items with the tag "python"'>
        python
      </a>
    
      <a href="/set-website/preview/pr-28/blog?search=%22tag:%20memory%22" class="tag" data-tooltip='Show items with the tag "memory"'>
        memory
      </a>
    
      <a href="/set-website/preview/pr-28/blog?search=%22tag:%20memory-management%22" class="tag" data-tooltip='Show items with the tag "memory-management"'>
        memory-management
      </a>
    
      <a href="/set-website/preview/pr-28/blog?search=%22tag:%20memory-allocators%22" class="tag" data-tooltip='Show items with the tag "memory-allocators"'>
        memory-allocators
      </a>
    
  </div>
  </section>

  
  
  

  <section class="background" data-size="page">
    <!--
  background: ;
  dark: ;
  size: ;
-->


<h1 id="tip-of-the-week-python-memory-management-and-troubleshooting">Tip of the Week: Python Memory Management and Troubleshooting</h1>

<div class="alert" style="--color: #0ea5e9">
  
  <i class="icon fa-solid fa-circle-info"></i>
  <div class="alert-content">
    
<p>These blog posts are intended to provide software tips, concepts, and tools geared towards helping you achieve your goals. Views
expressed in the content belong to the content creators and not the organization, its affiliates, or employees. If you
have any questions or suggestions for blog posts, please don’t hesitate to reach out!</p>

  </div>
</div>

<h2 id="introduction">Introduction</h2>

<!-- excerpt start -->
<p>Have you ever run Python code only to find it taking <em>forever</em> to complete or sometime abruptly ending with an error like: <code class="language-plaintext highlighter-rouge">123456 Killed</code> or <code class="language-plaintext highlighter-rouge">killed (program exited with code: 137)</code>?
You may have experienced memory resource or management challenges associated with these scenarios.
This post will cover some computer memory definitions, how Python makes use of computer memory, and share some tools which may help with these types of challenges.
<!-- excerpt end --></p>

<h2 id="what-is-memory">What is Memory?</h2>

<h3 id="computer-memory">Computer Memory</h3>

<!-- set a max width for mermaid diagram below so it doesn't render so large -->
<style>
.mermaid {
  display: block;
  margin: 0 auto;
  max-height: 400px;
}
</style>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyIChyZXNvdXJjZXMpXCJdXG5tZW1vcnlbXCJNZW1vcnlcIl1cbnN0b3JhZ2VbXCJEYXRhIFN0b3JhZ2VcIl1cbmNwdVtcIkNQVShzKVwiXVxuZW5kXG4lJS1cbnN0eWxlIGNvbXB1dGVyIGZpbGw6I2ZmZixzdHJva2U6IzMzM1xuc3R5bGUgc3RvcmFnZSBmaWxsOiNmZmYsc3Ryb2tlOiMzMzNcbnN0eWxlIGNwdSBmaWxsOiNmZmYsc3Ryb2tlOiMzMzNcbnN0eWxlIG1lbW9yeSBmaWxsOiM4NkVGQUMsc3Ryb2tlOiMzMzNcbiUlLSIsIm1lcm1haWQiOm51bGx9"></p>

<p class="center"><em>Computer memory is a type of computer resource available for use by software on a computer</em></p>

<p>Computer memory, also sometimes known as “RAM” or “random-access memory”, or “dynamic memory” is a type of resource used by computer software on a computer.
<em>“Computer memory stores information, such as data and programs for immediate use in the computer. … Main memory operates at a high speed compared to non-memory storage which is slower but less expensive and oftentimes higher in capacity. “ (<a href="https://en.wikipedia.org/wiki/Computer_memory">Wikipedia: Computer memory</a>).</em>
The word “speed” in this context is sometimes used to describe  the delay before an operation on a computer completes (also known as <em>latency</em>).
See the following on [Computer] <a href="https://www.softwareyoga.com/latency-numbers-everyone-should-know/">Latency Numbers Everyone Should Know</a> to better understand relative computer operation speeds.</p>

<!-- table HTML retained for replicability 

<div class='table-wrapper'><table>
<tr><th colspan="2">Memory Blocks</th></tr>
<tr>
<td>

<strong>A.)</strong> All memory blocks available.

<table>
<tr><td>Block</td><td>Block</td><td>Block</td></tr>
</table></div>

</td>
<td>

<strong>B.)</strong> Some memory blocks in use.

<div class='table-wrapper'><table>
<tr><td style="background:#86EFAC;">Block</td><td style="background:#86EFAC;">Block</td><td>Block</td></tr>
</table></div>

</td>
</tr>
<tr>
<td colspan="2" style="text-align:center;font-weight:bold;">Practical analogy</td>
</tr>
<tr>
<td>

<strong>C.)</strong> You have limited buckets to hold things.

<div class='table-wrapper'><table>
<tr><td>🪣</td><td>🪣</td><td>🪣</td></tr>
</table></div>

</td>
<td>

<strong>D.)</strong> Two buckets are used, the other remains empty.

<div class='table-wrapper'><table>
<tr><td style="background:#86EFAC;">🪣</td><td style="background:#86EFAC;">🪣</td><td>🪣</td></tr>
</table></div>

</td>
</tr>
</table>

-->

<figure class="figure">
  <a class="figure-image" aria-label="Fixed-size memory blocks may be free or used at various times. They can be thought of like reusable buckets to hold things.">
    <img src="/set-website/preview/pr-28/images/memory_blocks_examples.png" style="
        width: auto;
        max-height: unset;
      " alt="Fixed-size memory blocks may be free or used at various times. They can be thought of like reusable buckets to hold things." loading="lazy" onerror="this.src = '/set-website/preview/pr-28/images/fallback.svg'; this.onerror = null;">
  </a>
  
    <figcaption class="figure-caption">
      Fixed-size memory blocks may be free or used at various times. They can be thought of like reusable buckets to hold things.

    </figcaption>
  
</figure>

<p>Computer memory is organized using various methods based on the hardware and software being used.
A common method for organizing memory is through <a href="https://en.wikipedia.org/wiki/Memory_management#FIXED-SIZE">“fixed-size blocks”</a>, also called “blocks”.
Fixed-size memory blocks are chunks of memory of a certain byte size (usually all the same size).
Memory blocks may be in use or free at different times.</p>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyIChyZXNvdXJjZXMpXCJdXG4lJS1cbnN1YmdyYXBoIG1lbW9yeVtcIk1lbW9yeVwiXVxuc3ViZ3JhcGggaGVhcDEgW1wiaGVhcCAxXCJdXG5kaXJlY3Rpb24gVEJcbnN1YmdyYXBoIHBvb2xhW1wicG9vbCBhXCJdXG5ibG9ja3MxW1wiYmxvY2tzXCJdXG5lbmRcbnN1YmdyYXBoIHBvb2xiW1wicG9vbCBiXCJdXG5ibG9ja3MyW1wiYmxvY2tzXCJdXG5lbmRcbmVuZFxuc3ViZ3JhcGggaGVhcDIgW1wiaGVhcCAyXCJdXG5zdWJncmFwaCBwb29sY1tcInBvb2wgY1wiXVxuYmxvY2tzM1tcImJsb2Nrc1wiXVxuZW5kXG5lbmRcbmVuZFxuJSUtXG5lbmRcbiUlLVxuc3R5bGUgY29tcHV0ZXIgZmlsbDojZmZmLHN0cm9rZTojMzMzXG5zdHlsZSBtZW1vcnkgZmlsbDojODZFRkFDLHN0cm9rZTojMzMzXG5zdHlsZSBwb29sYSBmaWxsOiNCRkRCRkUsc3Ryb2tlOiMzMzM7XG5zdHlsZSBwb29sYiBmaWxsOiNCRkRCRkUsc3Ryb2tlOiMzMzM7XG5zdHlsZSBwb29sYyBmaWxsOiNCRkRCRkUsc3Ryb2tlOiMzMzM7IiwibWVybWFpZCI6bnVsbH0"></p>

<p class="center"><em>Memory heaps help organize available memory on a computer for specific procedures. Heaps may have one or many memory pools.</em></p>

<p>Fixed-size blocks may be organized in hierarchical layers to manage memory efficiently or towards a specific purpose.
One way to organize many fixed-size blocks is through the use of <strong><em>heaps</em></strong> which help describe chunks of the total memory available on a computer for specific processes.
These heaps may be <strong><em>private</em></strong> (only available to a specific software process) or <strong><em>shared</em></strong> (available to one or many software processes).
Heaps are sometimes further segmented into <strong><em>pools</em></strong> which are areas of the heap which can be used for specific purposes.</p>

<h3 id="memory-allocator">Memory Allocator</h3>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4lJS1cbnNvZnR3YXJlIC0-PiBhbGxvY2F0b3I6XCJJIG5lZWQgc29tZSBtZW1vcnksIHBsZWFzZSFcIlxuYWxsb2NhdG9yIC0-PiBtZW1vcnk6QWxsb2NhdGUgcG9ydGlvbiBvZiAgbWVtb3J5IGZvciB1c2Vcbm1lbW9yeSAtPj4gYWxsb2NhdG9yOkFsbG9jYXRlZCBtZW1vcnkgZm9yIHVzZVxuYWxsb2NhdG9yIC0-PiBzb2Z0d2FyZTpcIkhlcmUncyBzb21lIG1lbW9yeSB0byB1c2UhXCJcbiUlLVxuc29mdHdhcmUgLT4-IGFsbG9jYXRvcjpcIkknbSBmaW5pc2hlZCB3aXRoIHRoYXQgbWVtb3J5IVwiXG5hbGxvY2F0b3IgLT4-IG1lbW9yeTpGcmVlIHRoZSBtZW1vcnkgZm9yIG90aGVyIHB1cnBvc2VzLiIsIm1lcm1haWQiOm51bGx9"></p>

<p class="center"><em>Memory allocators help software reserve and free computer memory resources.</em></p>

<p>Memory management is a concept which helps enable the shared use of computer memory to avoid challenges such as memory overuse (where all memory is in use and never shared to other software).
Computer memory management often occurs through the use of a <strong><em>memory allocator</em></strong> which controls how computer memory resources are used for software.
Computer software is written to interact with memory allocators to use computer memory.
Memory allocators may be used manually (with specific directions provided on when and how to use memory resources) or automatically (with an algorithmic approach of some kind).
The memory allocator usually performs the following actions with memory (in addition to others):</p>

<ul>
  <li>
<strong>“Allocation”</strong>: computer memory resource reservation (taking memory). This is sometimes also known as “<code class="language-plaintext highlighter-rouge">alloc</code>”, or “allocate memory”.</li>
  <li>
<strong>“Deallocation”</strong>: computer memory resource freeing (giving back memory for other uses). This is sometimes also known as “<code class="language-plaintext highlighter-rouge">free</code>”, or “freeing memory from allocation”.</li>
</ul>

<h3 id="garbage-collection">Garbage Collection</h3>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4lJS1cbnBhcnRpY2lwYW50IHNvZnR3YXJlXG5wYXJ0aWNpcGFudCBtZW1vcnkgYWxsb2NhdG9yXG5wYXJ0aWNpcGFudCBnYXJiYWdlIGNvbGxlY3RvclxucGFydGljaXBhbnQgbWVtb3J5XG4lJS1cbnNvZnR3YXJlIC0-PiBtZW1vcnkgYWxsb2NhdG9yOlwiSSBuZWVkIHNvbWUgbWVtb3J5LCBwbGVhc2UhXCJcbm1lbW9yeSBhbGxvY2F0b3IgLT4-IG1lbW9yeTpBbGxvY2F0ZSBwb3J0aW9uIG9mICBtZW1vcnkgZm9yIHVzZVxubWVtb3J5IC0-PiBtZW1vcnkgYWxsb2NhdG9yOkFsbG9jYXRlZCBtZW1vcnkgZm9yIHVzZVxubWVtb3J5IGFsbG9jYXRvciAtPj4gc29mdHdhcmU6XCJIZXJlJ3Mgc29tZSBtZW1vcnkgdG8gdXNlIVwiXG4lJS1cbnNvZnR3YXJlIC0tPj4gZ2FyYmFnZSBjb2xsZWN0b3IgOihzb2Z0d2FyZSBmaW5pc2hlcyB3aXRoIG1lbW9yeSB1c2FnZSwgc29tZXRpbWVzIGltcGxpY2l0bHkpXG5nYXJiYWdlIGNvbGxlY3RvciAgLT4-IG1lbW9yeTpGcmVlIHRoZSBtZW1vcnkgZm9yIG90aGVyIHB1cnBvc2VzLiIsIm1lcm1haWQiOm51bGx9"></p>

<p class="center"><em>Garbage collectors help free computer memory which is no longer referenced by software.</em></p>

<p>“Garbage collection (GC)” is used to describe a type of automated memory management.
GC is typically used to help reduce human error, avoid unintentional system failures, and decrease development time (through less memory-specific code).
“The <em>garbage collector</em> attempts to reclaim memory which was allocated by the program, but is no longer referenced; such memory is called <em>garbage</em>.” (<a href="https://en.wikipedia.org/wiki/Garbage_collection_(computer_science)">Wikipedia: Garbage collection (computer science)</a>).
A garbage collector often works in tandem with a memory allocator to help control computer memory resource usage in software development.</p>

<h2 id="how-does-python-interact-with-computer-memory">How Does Python Interact with Computer Memory?</h2>

<h3 id="python-overview">Python Overview</h3>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyXCJdXG5kaXJlY3Rpb24gTFJcbm1lbW9yeVtcIk1lbW9yeVwiXVxuY29kZVtcIlB5dGhvbiBjb2RlXCJdXG5pbnRlcnByZXRlcltcIlB5dGhvbiBpbnRlcnByZXRlclwiXVxuZW5kXG4lJS1cbmNvZGUgLS0-IHxpbnRlcnByZXRlZCBhbmRcXG5leGVjdXRlZCBieXwgaW50ZXJwcmV0ZXJcbmludGVycHJldGVyIDwtLT4gfGFsbG9jYXRlcyBtZW1vcnlcXG5mb3IgcHJvY2Vzc2VkIGNvZGV8IG1lbW9yeVxuJSUtXG5zdHlsZSBjb21wdXRlciBmaWxsOiNmZmYsc3Ryb2tlOiMzMzNcbnN0eWxlIG1lbW9yeSBmaWxsOiM4NkVGQUMsc3Ryb2tlOiMzMzNcbnN0eWxlIGNvZGUgZmlsbDojNjdFOEY5LHN0cm9rZTojMzMzO1xuc3R5bGUgaW50ZXJwcmV0ZXIgZmlsbDojRkRCQTc0LHN0cm9rZTojMzMzOyIsIm1lcm1haWQiOm51bGx9"></p>

<p class="center"><em>A Python interpreter executes Python code and manages memory for Python procedures.</em></p>

<p>Python is an interpreted “high-level” programming language (<a href="https://www.python.org/doc/essays/blurb/">Python: What is Python?</a>).
Interpreted languages are those which include an “interpreter” which helps execute code written in a particular way (<a href="https://en.wikipedia.org/wiki/Interpreter_(computing)">Wikipedia: Interpreter (computing)</a>).
High-level languages such as Python often remove the requirement for software developers to manually perform memory management (<a href="https://en.wikipedia.org/wiki/High-level_programming_language">Wikipedia: High-level programming language</a>).</p>

<p>Python code is executed by a commonly pre-packaged and downloaded binary call the Python <a href="https://en.wikipedia.org/wiki/Interpreter_(computing)">interpreter</a>.
The Python interpreter reads Python code and performs memory management as the code is executed.
The <a href="https://github.com/python/cpython">CPython Python interpreter</a> is the most commonly used interpreter for Python, and what’s use as a reference for other content here.
There are also other interpreters such as <a href="https://www.pypy.org/features.html">PyPy</a>, <a href="https://github.com/jython/jython">Jython</a>, and <a href="https://ironpython.net/">IronPython</a> which all handle memory differently than the CPython interpreter.</p>

<h3 id="pythons-memory-manager">Python’s Memory Manager</h3>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyXCJdXG5kaXJlY3Rpb24gTFJcbnN1YmdyYXBoIG1lbW9yeVtcIk1lbW9yeVwiXVxucHloZWFwW1wiUHl0aG9uIGhlYXBcIl1cbmVuZFxuY29kZVtcIlB5dGhvbiBjb2RlXCJdXG5zdWJncmFwaCBpbnRlcnByZXRlcltcIlB5dGhvbiBpbnRlcnByZXRlclwiXVxubWFuYWdlcltcIlB5dGhvbiBtZW1vcnkgbWFuYWdlclwiXVxuZW5kXG5lbmRcbiUlLVxuY29kZSAtLT4gfGludGVycHJldGVkIGFuZFxcbmV4ZWN1dGVkIGJ5fCBpbnRlcnByZXRlclxubWFuYWdlciAtLT4gfGFsbG9jYXRlcyBtZW1vcnlcXG5mb3IgcHJvY2Vzc2VkIGNvZGV8IHB5aGVhcFxuJSUtXG5zdHlsZSBjb21wdXRlciBmaWxsOiNmZmYsc3Ryb2tlOiMzMzNcbnN0eWxlIG1lbW9yeSBmaWxsOiM4NkVGQUMsc3Ryb2tlOiMzMzNcbnN0eWxlIGNvZGUgZmlsbDojNjdFOEY5LHN0cm9rZTojMzMzO1xuc3R5bGUgbWFuYWdlciBmaWxsOiNGREJBNzQsc3Ryb2tlOiMzMzM7IiwibWVybWFpZCI6bnVsbH0"></p>

<p class="center"><em>The Python memory manager helps manage memory for Python code executed by the Python interpreter.</em></p>

<p>Memory is managed for Python software processes automatically (when unspecified) or manually (when specified) through the Python interpreter.
The <strong><em>Python memory manager</em></strong> is an abstraction which manages memory for Python software processes through the Python interpreter (<a href="https://docs.python.org/3/c-api/memory.html">Python: Memory Management</a>).
From a high-level perspective, we assume variables and other operations written in Python will automatically allocate and deallocate memory through the Python interpreter when executed.
Python’s memory manager performs work through various <strong>memory allocators</strong> and a <strong>garbage collector</strong> (or as configured with customizations) within a <strong>private Python memory heap</strong>.</p>

<h3 id="pythons-memory-allocators">Python’s Memory Allocators</h3>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyXCJdXG5kaXJlY3Rpb24gTFJcbnN1YmdyYXBoIG1lbW9yeVtcIk1lbW9yeVwiXVxucHloZWFwW1wiUHl0aG9uIGhlYXBcIl1cbmVuZFxuY29kZVtcIlB5dGhvbiBjb2RlXCJdXG5tYWxsb2NbXCJDIG1lbW9yeSBmdW5jdGlvbnNcIl1cbnN1YmdyYXBoIGludGVycHJldGVyIFtcIlB5dGhvbiBpbnRlcnByZXRlclwiXVxuc3ViZ3JhcGggc3BhY2VyIFtcIiBcIl1cbnN1YmdyYXBoIG1nciBbXCJQeXRob24gbWVtb3J5IG1hbmFnZXJcIl1cbnB5bWFsbG9jW1wicHltYWxsb2NcIl1cbmVuZFxuZW5kXG5lbmRcbmVuZFxuJSUtXG5jb2RlIC0tPiB8aW50ZXJwcmV0ZWQgYW5kXFxuZXhlY3V0ZWQgYnl8IGludGVycHJldGVyXG5weW1hbGxvYyAtLT4gfFwiYWxsb2NhdGVzIG1lbW9yeSBmb3JcXG5zbWFsbCBhbmQgdGVtcG9yYXJ5IG5lZWRzXCJ8IG1hbGxvY1xubWdyIC0tPiB8XCJhbGxvY2F0ZXMgbWVtb3J5IGZvclxcbmxhcmdlciBvciBsb25nLWxpdmVkIG5lZWRzXCJ8IG1hbGxvY1xubWFsbG9jIC0tPiBweWhlYXBcbiUlLVxuc3R5bGUgY29tcHV0ZXIgZmlsbDojZmZmLHN0cm9rZTojMzMzXG5zdHlsZSBtZW1vcnkgZmlsbDojODZFRkFDLHN0cm9rZTojMzMzXG5zdHlsZSBjb2RlIGZpbGw6IzY3RThGOSxzdHJva2U6IzMzMztcbnN0eWxlIG1nciBmaWxsOiNGREJBNzQsc3Ryb2tlOiMzMzM7XG5zdHlsZSBweW1hbGxvYyBmaWxsOiNGQkJGMjQsc3Ryb2tlOiMzMzM7XG5zdHlsZSBtYWxsb2MgZmlsbDojRkJCRjI0LHN0cm9rZTojMzMzO1xuc3R5bGUgc3BhY2VyIHN0cm9rZTpub25lOyIsIm1lcm1haWQiOm51bGx9"></p>

<p class="center"><em>The Python memory manager by default will use <code class="language-plaintext highlighter-rouge">pymalloc</code> internally or malloc from the system to allocate computer memory resources.</em></p>

<p>The Python memory manager allocates memory for use through memory allocators.
Python may use one or many memory allocators depending on specifications in Python code and how the Python interpreter is configured (for example, see <a href="https://docs.python.org/3/c-api/memory.html#default-memory-allocators">Python: Memory Management - Default Memory Allocators</a>).
One way to understand Python memory allocators is through the following distinctions.</p>

<ul>
  <li>
<strong>“Python Memory Allocator” (<code class="language-plaintext highlighter-rouge">pymalloc</code>)</strong>
The Python interpreter is packaged with a specialized memory allocator called <code class="language-plaintext highlighter-rouge">pymalloc</code>.
“Python has a pymalloc allocator optimized for small objects (smaller or equal to 512 bytes) with a short lifetime.” (<a href="https://docs.python.org/3/c-api/memory.html#the-pymalloc-allocator">Python: Memory Management - The pymalloc allocator</a>).
Ultimately, <code class="language-plaintext highlighter-rouge">pymalloc</code> uses C standard library dynamic memory allocation functions to implement memory work.</li>
  <li>
<strong>C dynamic memory allocation functions (<code class="language-plaintext highlighter-rouge">malloc</code>, <code class="language-plaintext highlighter-rouge">realloc</code>, etc.)</strong>
When <code class="language-plaintext highlighter-rouge">pymalloc</code> is disabled or a memory requirements exceed <code class="language-plaintext highlighter-rouge">pymalloc</code>’s constraints, the Python interpreter will directly use a function from the <a href="https://en.wikipedia.org/wiki/C_standard_library">C standard library</a> called <a href="https://en.wikipedia.org/wiki/C_dynamic_memory_allocation">C standard library dynamic memory allocation functions</a>.
When C standard library dynamic memory allocation functions are used by the Python interpreter, it uses the system’s existing implementation of the C standard library.</li>
</ul>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyIChyZXNvdXJjZXMpXCJdXG4lJS1cbnN1YmdyYXBoIG1lbW9yeVtcIk1lbW9yeVwiXVxuc3ViZ3JhcGggaGVhcDEgW1wiaGVhcFwiXVxuZGlyZWN0aW9uIFRCXG5zdWJncmFwaCBhcmVuYSBbXCJweW1hbGxvY1xcbmFyZW5hKHMpXCJdXG5zdWJncmFwaCBzcGFjZXIgW1wiIFwiXVxuc3ViZ3JhcGggcG9vbHNbXCJwb29sKHMpXCJdXG5ibG9ja3NbXCJibG9ja3NcIl1cbmVuZFxuZW5kXG5lbmRcbmVuZFxuZW5kXG4lJS1cbmVuZFxuJSUtXG5zdHlsZSBjb21wdXRlciBmaWxsOiNmZmYsc3Ryb2tlOiMzMzNcbnN0eWxlIG1lbW9yeSBmaWxsOiM4NkVGQUMsc3Ryb2tlOiMzMzNcbnN0eWxlIGFyZW5hIGZpbGw6I0Q4QjRGRSxzdHJva2U6IzMzM1xuc3R5bGUgcG9vbHMgZmlsbDojQzdEMkZFLHN0cm9rZTojMzMzXG5zdHlsZSBzcGFjZXIgZmlsbDp0cmFuc3BhcmVudCxzdHJva2U6dHJhbnNwYXJlbnQ7IiwibWVybWFpZCI6bnVsbH0"></p>

<p class="center"><em><code class="language-plaintext highlighter-rouge">pymalloc</code> makes use of arenas to further organize pools within a computer memory heap.</em></p>

<p>It’s important to note that <code class="language-plaintext highlighter-rouge">pymalloc</code> adds additional abstractions to how memory is organized through the use of “arenas”.
These arenas are specific to <code class="language-plaintext highlighter-rouge">pymalloc</code> purposes.
<code class="language-plaintext highlighter-rouge">pymalloc</code> may be disabled through the use of a special environment variable called <a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONMALLOC"><code class="language-plaintext highlighter-rouge">PYTHONMALLOC</code></a> (for example, to use only <a href="https://en.wikipedia.org/wiki/C_dynamic_memory_allocation">C standard library dynamic memory allocation functions</a> as seen below).
This same environment variable may be used with <code class="language-plaintext highlighter-rouge">debug</code> settings in order to help troubleshoot in-depth questions.</p>

<p><strong>Additional Python Memory Allocators</strong></p>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyXCJdXG5kaXJlY3Rpb24gTFJcbnN1YmdyYXBoIG1lbW9yeVtcIk1lbW9yeVwiXVxucHloZWFwW1wiUHl0aG9uIGhlYXBcIl1cbmVuZFxuY29kZVtcIlB5dGhvbiBjb2RlXCJdXG5tYWxsb2NbXCJDIG1lbW9yeSBmdW5jdGlvbnNcIl1cbnN1YmdyYXBoIGludGVycHJldGVyIFtcIlB5dGhvbiBpbnRlcnByZXRlclwiXVxuc3ViZ3JhcGggc3BhY2VyIFtcIiBcIl1cbnN1YmdyYXBoIG1nciBbXCJQeXRob24gbWVtb3J5IG1hbmFnZXJcIl1cbnB5bWFsbG9jW1wicHltYWxsb2NcIl1cbmVuZFxuZW5kXG5wYWNrYWdlX21hbmFnZWRbXCJQeXRob24gcGFja2FnZVxcbm1hbmFnZWQgYWxsb2NhdG9yc1xcbihleC4gTnVtUHksIFB5QXJyb3csIGV0Yy4pXCJdXG5lbmRcbm1pbWFsbG9jW1wibWltYWxsb2MgbWVtb3J5IGZ1bmN0aW9uc1wiXVxuamVtYWxsb2NbXCJqZW1hbGxvYyBtZW1vcnkgZnVuY3Rpb25zXCJdXG5lbmRcbiUlLVxuY29kZSAtLT4gfGludGVycHJldGVkIGFuZFxcbmV4ZWN1dGVkIGJ5fCBpbnRlcnByZXRlclxucHltYWxsb2MgLS0-IHxcImFsbG9jYXRlcyBtZW1vcnkgZm9yXFxuc21hbGwgYW5kIHRlbXBvcmFyeSBuZWVkc1wifCBtYWxsb2Ncbm1nciAtLT4gfFwiYWxsb2NhdGVzIG1lbW9yeSBmb3JcXG5sYXJnZXIgb3IgbG9uZy1saXZlZCBuZWVkc1wifCBtYWxsb2Ncbm1hbGxvYyAtLT4gcHloZWFwXG5jb2RlIC0uLT4gfG1heSBzdGlwdWxhdGVcXG50aGUgdXNlIG9mfCBwYWNrYWdlX21hbmFnZWRcbnBhY2thZ2VfbWFuYWdlZCAtLi0-IG1hbGxvY1xucGFja2FnZV9tYW5hZ2VkIC0uLT4gbWltYWxsb2NcbnBhY2thZ2VfbWFuYWdlZCAtLi0-IGplbWFsbG9jXG5taW1hbGxvYyAtLi0-IHB5aGVhcFxuamVtYWxsb2MgLS4tPiBweWhlYXBcbiUlLVxuc3R5bGUgY29tcHV0ZXIgZmlsbDojZmZmLHN0cm9rZTojMzMzXG5zdHlsZSBtZW1vcnkgZmlsbDojODZFRkFDLHN0cm9rZTojMzMzXG5zdHlsZSBjb2RlIGZpbGw6IzY3RThGOSxzdHJva2U6IzMzMztcbnN0eWxlIG1nciBmaWxsOiNGREJBNzQsc3Ryb2tlOiMzMzM7XG5zdHlsZSBweW1hbGxvYyBmaWxsOiNGQkJGMjQsc3Ryb2tlOiMzMzM7XG5zdHlsZSBtYWxsb2MgZmlsbDojRkJCRjI0LHN0cm9rZTojMzMzO1xuc3R5bGUgcGFja2FnZV9tYW5hZ2VkIGZpbGw6I0ZCQkYyNCxzdHJva2U6IzMzMztcbnN0eWxlIG1pbWFsbG9jIGZpbGw6I0ZFRjA4QSxzdHJva2U6IzMzMztcbnN0eWxlIGplbWFsbG9jIGZpbGw6I0ZFRjA4QSxzdHJva2U6IzMzMztcbnN0eWxlIHNwYWNlciBzdHJva2U6bm9uZTsiLCJtZXJtYWlkIjpudWxsfQ"></p>

<p class="center"><em>Python code and package dependencies may stipulate the use of additional memory allocators, such as <code class="language-plaintext highlighter-rouge">mimalloc</code> and <code class="language-plaintext highlighter-rouge">jemalloc</code> outside of the Python memory manager.</em></p>

<p>Python provides the capability of customizing memory allocation through the use of packages.
See below for some notable examples of additional memory allocation possibilities.</p>

<ul>
  <li>
<strong>NumPy Memory Allocation</strong>
<a href="https://numpy.org/">NumPy</a> <a href="https://numpy.org/doc/stable/reference/c-api/data_memory.html">uses custom C-API’s</a> which are backed by C dynamic memory allocation functions (<code class="language-plaintext highlighter-rouge">alloc</code>, <code class="language-plaintext highlighter-rouge">free</code>, <code class="language-plaintext highlighter-rouge">realloc</code>) to help address memory management.
These interfaces can be controlled directly through NumPy to help manage memory effectively when using the package.</li>
  <li>
<strong>PyArrow Memory Allocators</strong>
<a href="https://arrow.apache.org/">PyArrow</a> provides the capability to use C standard library dynamic memory allocation functions, <a href="https://github.com/jemalloc/jemalloc"><code class="language-plaintext highlighter-rouge">jemalloc</code></a>, or <a href="https://github.com/microsoft/mimalloc"><code class="language-plaintext highlighter-rouge">mimalloc</code></a> through the <a href="https://arrow.apache.org/docs/python/api/memory.html#memory-pools">PyArrow Memory Pools group of functions</a>.
A default memory allocator is selected for use when PyArrow based on the operating system and the availability of the memory allocator on the system.
The selection of a memory allocator for use with PyArrow can be influenced by how it performs on a particular system.</li>
</ul>

<h3 id="python-reference-counting">Python Reference Counting</h3>

<!-- table HTML retained for replicability 

<div class='table-wrapper'><table>
<tr><th>Processed line of code</th><th>Reference count</th></tr>
<tr>

<td>

```python
a_string = "cornucopia"
```

</td>
<td>
a_string: 1
</td>
<tr>
<td>

```python
reference_a_string = a_string
```

</td>
<td>
a_string: 2<br>
(Because `a_string` is now referenced twice.)
</td>
</tr>
<tr>
<td>

```python
del reference_a_string
```

</td>
<td>
a_string: 1<br>
(Because the additional reference has been deleted.)
</td>
</tr>

</table></div>

-->

<figure class="figure">
  <a class="figure-image" aria-label="Python reference counting at a simple level works through the use of object reference increments and decrements.">
    <img src="/set-website/preview/pr-28/images/python_reference_counting_example.png" style="
        width: auto;
        max-height: unset;
      " alt="Python reference counting at a simple level works through the use of object reference increments and decrements." loading="lazy" onerror="this.src = '/set-website/preview/pr-28/images/fallback.svg'; this.onerror = null;">
  </a>
  
    <figcaption class="figure-caption">
      Python reference counting at a simple level works through the use of object reference increments and decrements.

    </figcaption>
  
</figure>

<p>As computer memory is allocated to Python processes the Python memory manager keeps track of these through the use of a <a href="https://en.wikipedia.org/wiki/Reference_counting">reference counter</a>.
In Python, we could label this as an “Object reference counter” because all data in Python is represented by objects (<a href="https://docs.python.org/3/reference/datamodel.html#objects-values-and-types">Python: Data model</a>).
“… CPython counts how many different places there are that have a reference to an object. Such a place could be another object, or a global (or static) C variable, or a local variable in some C function.” (<a href="https://devguide.python.org/internals/garbage-collector/">Python Developer’s Guide: Garbage collector design</a>).</p>

<h3 id="pythons-garbage-collection">Python’s Garbage Collection</h3>

<p><img class="mermaid" src="https://mermaid.ink/svg/eyJjb2RlIjoiZmxvd2NoYXJ0IExSXG4lJS1cbnN1YmdyYXBoIGNvbXB1dGVyIFtcIkNvbXB1dGVyXCJdXG5kaXJlY3Rpb24gTFJcbnN1YmdyYXBoIG1lbW9yeVtcIk1lbW9yeVwiXVxucHloZWFwW1wiUHl0aG9uIGhlYXBcIl1cbmVuZFxuY29kZVtcIlB5dGhvbiBjb2RlXCJdXG5tYWxsb2NbXCJDIG1lbW9yeSBmdW5jdGlvbnNcIl1cbnN1YmdyYXBoIGludGVycHJldGVyIFtcIlB5dGhvbiBpbnRlcnByZXRlclwiXVxuc3ViZ3JhcGggc3BhY2VyIFtcIiBcIl1cbnN1YmdyYXBoIG1nciBbXCJQeXRob24gbWVtb3J5IG1hbmFnZXJcIl1cbnB5bWFsbG9jW1wicHltYWxsb2NcIl1cbmdjW1wiR2FyYmFnZVxcbkNvbGxlY3RvclwiXVxuZW5kXG5lbmRcbmVuZFxuZW5kXG4lJS1cbmNvZGUgLS0-IHxpbnRlcnByZXRlZCBhbmRcXG5leGVjdXRlZCBieXwgaW50ZXJwcmV0ZXJcbnB5bWFsbG9jIC0tPiB8XCJhbGxvY2F0ZXMgbWVtb3J5IGZvclxcbnNtYWxsIGFuZCB0ZW1wb3JhcnkgbmVlZHNcInwgbWFsbG9jXG5tZ3IgLS0-IHxcImFsbG9jYXRlcyBtZW1vcnkgZm9yXFxubGFyZ2VyIG9yIGxvbmctbGl2ZWQgbmVlZHNcInwgbWFsbG9jXG5tYWxsb2MgLS0-IHB5aGVhcFxuZ2MgLS0-IHxcImZyZWVzIG1lbW9yeSB3aXRoXFxubm8gb2JqZWN0IHJlZmVyZW5jZXNcXG4oaW5jbHVkaW5nIEMsIG1pbWFsbG9jLFxcbiBqZW1hbGxvYyBhbmQgb3RoZXIgXFxuZnVuY3Rpb24gYWxsb2NhdGVkIG1lbW9yeSlcInwgcHloZWFwXG4lJS1cbnN0eWxlIGNvbXB1dGVyIGZpbGw6I2ZmZixzdHJva2U6IzMzM1xuc3R5bGUgbWVtb3J5IGZpbGw6Izg2RUZBQyxzdHJva2U6IzMzM1xuc3R5bGUgY29kZSBmaWxsOiM2N0U4Rjksc3Ryb2tlOiMzMzM7XG5zdHlsZSBtZ3IgZmlsbDojRkRCQTc0LHN0cm9rZTojMzMzO1xuc3R5bGUgcHltYWxsb2MgZmlsbDojRkJCRjI0LHN0cm9rZTojMzMzO1xuc3R5bGUgbWFsbG9jIGZpbGw6I0ZCQkYyNCxzdHJva2U6IzMzMztcbnN0eWxlIGdjIGZpbGw6I0ZDQTVBNSxzdHJva2U6IzMzMztcbnN0eWxlIHNwYWNlciBzdHJva2U6bm9uZTsiLCJtZXJtYWlkIjpudWxsfQ"></p>

<p class="center"><em>The Python garbage collector works as part of the Python memory manager to free memory which is no longer needed (based on reference count).</em></p>

<p>Python by default uses an optional garbage collector to automatically deallocate garbage memory through the Python interpreter in CPython.
“When an object’s reference count becomes zero, the object is deallocated.” (<a href="https://devguide.python.org/internals/garbage-collector/">Python Developer’s Guide: Garbage collector design</a>)
Python’s garbage collector focuses on collecting garbage created by <code class="language-plaintext highlighter-rouge">pymalloc</code>, C memory functions, as well as other memory allocators like <code class="language-plaintext highlighter-rouge">mimalloc</code> and <code class="language-plaintext highlighter-rouge">jemalloc</code>.</p>

<h2 id="python-tools-for-observing-memory-behavior">Python Tools for Observing Memory Behavior</h2>

<h3 id="python-built-in-tools">Python Built-in Tools</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">gc</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># set gc in debug mode for detecting memory leaks
</span><span class="n">gc</span><span class="p">.</span><span class="n">set_debug</span><span class="p">(</span><span class="n">gc</span><span class="p">.</span><span class="n">DEBUG_LEAK</span><span class="p">)</span>

<span class="c1"># create an int object
</span><span class="n">an_object</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># show the number of uncollectable references via COLLECTED
</span><span class="n">COLLECTED</span> <span class="o">=</span> <span class="n">gc</span><span class="p">.</span><span class="n">collect</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Uncollectable garbage references: </span><span class="si">{</span><span class="n">COLLECTED</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># show the reference count for an object
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Reference count of `an_object`: </span><span class="si">{</span><span class="n">sys</span><span class="p">.</span><span class="n">getrefcount</span><span class="p">(</span><span class="n">an_object</span><span class="p">)</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<p>The <a href="https://docs.python.org/3/library/gc.html"><code class="language-plaintext highlighter-rouge">gc</code> module</a> provides an interface to the Python garbage collector.
In addition, the <a href="https://docs.python.org/3/library/sys.html"><code class="language-plaintext highlighter-rouge">sys</code> module</a> provides many functions which provide information about references and other details about Python objects as they are executed through the interpreter.
These functions and other packages can help software developers observe memory behaviors within Python procedures.</p>

<h3 id="python-package-scalene">Python Package: Scalene</h3>

<figure class="figure">
  <a class="figure-image" aria-label="Scalene provides a web interface to analyze memory, CPU, and GPU resource consumption in one spot alongside suggested areas of concern.">
    <img src="/set-website/preview/pr-28/images/scalene-web-interface.png" style="
        width: auto;
        max-height: unset;
      " alt="Scalene provides a web interface to analyze memory, CPU, and GPU resource consumption in one spot alongside suggested areas of concern." loading="lazy" onerror="this.src = '/set-website/preview/pr-28/images/fallback.svg'; this.onerror = null;">
  </a>
  
    <figcaption class="figure-caption">
      Scalene provides a web interface to analyze memory, CPU, and GPU resource consumption in one spot alongside suggested areas of concern.

    </figcaption>
  
</figure>

<p><a href="https://github.com/plasma-umass/scalene">Scalene</a> is a Python package for analyzing memory, CPU, and GPU resource consumption.
It provides <a href="https://github.com/plasma-umass/scalene?tab=readme-ov-file#web-based-gui">a web interface</a> to help visualize and understand how resources are consumed.
Scalene provides suggestions on which portions of your code to troubleshoot through the web interface.
Scalene can also be configured to work with <a href="https://en.wikipedia.org/wiki/OpenAI">OpenAI</a> <a href="https://en.wikipedia.org/wiki/Large_language_model">LLM’s</a> by way of a an <a href="https://github.com/plasma-umass/scalene?tab=readme-ov-file#ai-powered-optimization-suggestions">OpenAI API  provided by the user</a>.</p>

<h3 id="python-package-memray">Python Package: Memray</h3>

<figure class="figure">
  <a class="figure-image" aria-label="Memray provides the ability to create and view flamegraphs which show how memory was consumed as a procedure executed.">
    <img src="/set-website/preview/pr-28/images/memray-flamegraph.png" style="
        width: auto;
        max-height: unset;
      " alt="Memray provides the ability to create and view flamegraphs which show how memory was consumed as a procedure executed." loading="lazy" onerror="this.src = '/set-website/preview/pr-28/images/fallback.svg'; this.onerror = null;">
  </a>
  
    <figcaption class="figure-caption">
      Memray provides the ability to create and view flamegraphs which show how memory was consumed as a procedure executed.

    </figcaption>
  
</figure>

<p><a href="https://github.com/bloomberg/memray">Memray</a> is a Python package to track memory allocation within Python and compiled extension modules.
Memray provides a high-level way to investigate memory performance and adds visualizations such as <a href="https://www.brendangregg.com/flamegraphs.html">flamegraphs</a>(which contextualization of <a href="https://en.wikipedia.org/wiki/Stack_trace">stack traces</a> and memory allocations in one spot).
Memray seeks to provide a way to overcome challenges with tracking and understanding Python and other memory allocators (such as C, C++, or Rust libraries used in tandem with a Python process).</p>

<h2 id="concluding-thoughts">Concluding Thoughts</h2>

<p>It’s worth mentioning that this article covers only a small fraction of how and what memory is as well as how Python might make use of it.
Hopefully it clarifies the process and provides a way to get started with investigating memory within the software you work with.
Wishing you the very best in your software journey with memory!</p>
  </section>

  
  
  

  <section class="background" data-size="page">
    <!--
  background: ;
  dark: ;
  size: ;
-->


<div class="post-nav">
  <span>
    
      <i class="icon fa-solid fa-angle-left"></i> Previous post<br>
      <a href="/set-website/preview/pr-28/2023/11/15/Codesgiving-Open-source-Contribution-Walkthrough.html">
        Tip of the Week: Codesgiving - Open-source Contribution Walkthrough
      </a>
    
  </span>
  <span>
    
  </span>
</div>
  </section>


    </main>
    


<footer class="background" style="--image: url('/set-website/preview/pr-28/images/background.jpg')" data-dark="true" data-size="wide">
  <!--
    <div>
      Extra details like contact info or address
    </div>
  -->

  <div>
    
      
      
      



  <div class="button-wrapper">
    <a class="button" href="https://github.com/CU-DBMI" data-tooltip="GitHub" data-style="bare" aria-label="GitHub">
      <i class="icon fa-brands fa-github"></i>
      
    </a>
  </div>


    
  </div>

  <div>
    © 2024
    Software Engineering Team
      |   Built with
    <a href="https://github.com/greenelab/lab-website-template">
      Lab Website Template
    </a>
  </div>

  <input type="checkbox" class="dark-toggle" data-tooltip="Dark mode" aria-label="toggle dark mode" oninput="onDarkToggleChange(event)">
</footer>

  </body>
</html>
